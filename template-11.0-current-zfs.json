{
  "variables": {
    "iso_checksum": "8b5c9a9240962a497507f374dcf3839744c63f271fe2b2d36a4fd4d46eb966a3a697684f3379dcb87816b92b44f443e5fa4a71ec713fc408c1ac60990d73817e",
    "iso_checksum_type": "sha512",
    "iso_daterev": "20160518-r300097",
    "iso_version": "11.0"
  },
  "builders": [
    {
      "type": "vmware-iso",
      "boot_command": [
        "I<wait>",
        "<enter><wait>",
        "freebsd-vagrant",
        "<enter><wait>",
        "k<spacebar>",
        "<down><down><spacebar>",
        "<enter><wait>",
        "<down><down><down>",
        "<enter><wait>",
        "<enter><wait>",
        "<enter><wait>",
        "<spacebar>",
        "<enter><wait>",
        "<left><wait>",
        "Y<wait10><wait10><wait10><wait10><wait10><wait10><wait10><wait10><wait10>",
        "vagrant<enter><wait>",
        "vagrant<enter><wait>",
        "<enter><wait>",
        "Y<wait>",
        "Y<wait10>",
        "Y<wait>",
        "Y<wait10><wait10>",
        "<enter><wait>",
        "a<enter><wait>",
        "Y<wait>",
        "n<spacebar><wait>",
        "p<spacebar><wait>",
        "<enter><wait>",
        "Y<wait>",
        "vagrant<enter><wait>",
        "Vagrant User<enter><wait>",
        "<enter><wait>",
        "<enter><wait>",
        "wheel",
        "<enter><wait>",
        "<enter><wait>",
        "tcsh",
        "<enter><wait>",
        "<enter><wait>",
        "0700",
        "<enter><wait>",
        "Y",
        "<enter><wait>",
        "N",
        "<enter><wait>",
        "N",
        "<enter><wait>",
        "vagrant<enter><wait>",
        "vagrant<enter><wait>",
        "N",
        "<enter><wait>",
        "Y",
        "<enter><wait>",
        "N",
        "<enter><wait>",
        "<enter><wait10><wait10>",
        "<left>",
        "Y<wait>",
        "sed -i -e 's/#PermitRootLogin no/PermitRootLogin yes/' /etc/ssh/sshd_config<enter><wait>",
        "echo 'autoboot_delay=\"-1\"' >> /boot/loader.conf<enter><wait>",
        "chsh -s sh root<enter><wait>",
        "exit<enter><wait>",
        "R<wait10><wait10><wait10>"
      ],
      "boot_wait": "45s",
      "disk_size": 20480,
      "guest_os_type": "freebsd-64",
      "headless": "true",
      "iso_checksum": "{{user `iso_checksum`}}",
      "iso_checksum_type": "{{user `iso_checksum_type`}}",
      "iso_url": "http://ftp.freebsd.org/pub/FreeBSD/snapshots/ISO-IMAGES/{{user `iso_version`}}/FreeBSD-{{user `iso_version`}}-CURRENT-amd64-{{user `iso_daterev`}}-disc1.iso",
      "shutdown_command": "poweroff; poweroff",
      "ssh_password": "vagrant",
      "ssh_username": "root",
      "ssh_wait_timeout": "30s"
    },
    {
      "type": "virtualbox-iso",
      "boot_command": [
        "I<wait>",
        "<enter><wait>",
        "freebsd-vagrant",
        "<enter><wait>",
        "k<spacebar>",
        "<down><down><spacebar>",
        "<enter><wait>",
        "<down><down><down>",
        "<enter><wait>",
        "<enter><wait>",
        "<enter><wait>",
        "<spacebar>",
        "<enter><wait>",
        "<left><wait>",
        "Y<wait10><wait10><wait10><wait10><wait10><wait10><wait10><wait10><wait10>",
        "vagrant<enter><wait>",
        "vagrant<enter><wait>",
        "<enter><wait>",
        "Y<wait>",
        "Y<wait10>",
        "Y<wait>",
        "Y<wait10><wait10>",
        "<enter><wait>",
        "a<enter><wait>",
        "Y<wait>",
        "n<spacebar><wait>",
        "p<spacebar><wait>",
        "<enter><wait>",
        "Y<wait>",
        "vagrant<enter><wait>",
        "Vagrant User<enter><wait>",
        "<enter><wait>",
        "<enter><wait>",
        "wheel",
        "<enter><wait>",
        "<enter><wait>",
        "tcsh",
        "<enter><wait>",
        "<enter><wait>",
        "0700",
        "<enter><wait>",
        "Y",
        "<enter><wait>",
        "N",
        "<enter><wait>",
        "N",
        "<enter><wait>",
        "vagrant<enter><wait>",
        "vagrant<enter><wait>",
        "N",
        "<enter><wait>",
        "Y",
        "<enter><wait>",
        "N",
        "<enter><wait>",
        "<enter><wait10><wait10>",
        "<left>",
        "Y<wait>",
        "sed -i -e 's/#PermitRootLogin no/PermitRootLogin yes/' /etc/ssh/sshd_config<enter><wait>",
        "echo 'autoboot_delay=\"-1\"' >> /boot/loader.conf<enter><wait>",
        "chsh -s sh root<enter><wait>",
        "exit<enter><wait>",
        "R<wait10><wait10><wait10>"
      ],
      "boot_wait": "45s",
      "disk_size": 20480,
      "guest_os_type": "FreeBSD_64",
      "headless": "true",
      "iso_checksum": "{{user `iso_checksum`}}",
      "iso_checksum_type": "{{user `iso_checksum_type`}}",
      "iso_url": "http://ftp.freebsd.org/pub/FreeBSD/snapshots/ISO-IMAGES/{{user `iso_version`}}/FreeBSD-{{user `iso_version`}}-CURRENT-amd64-{{user `iso_daterev`}}-disc1.iso",
      "shutdown_command": "poweroff; poweroff",
      "ssh_password": "vagrant",
      "ssh_username": "root",
      "ssh_wait_timeout": "30s"
    }
  ],
  "provisioners": [
    {
      "scripts": [
        "scripts/zfs-setup.sh",
        "scripts/postinstall.sh"
      ],
      "type": "shell"
    }
  ],
  "post-processors": [
    {
      "output": "FreeBSD-CURRENT-zfs-{{user `iso_daterev`}}-{{.Provider}}.box",
      "type": "vagrant",
      "override": {
        "vmware": {
          "vagrantfile_template": "./Vagrantfile.vmware"
        },
        "virtualbox": {
          "vagrantfile_template": "./Vagrantfile.virtualbox"
        }
      }
    }
  ]
}
