{
  "variables": {
    "iso_checksum": "8a4a88b158ca2e09b39bd9f55ca44bedfd6c33302fc1b2eefde2a4eb0341ac8967ee4440c0ad0ab09969230276b5ccd1fece48f9af452ea005a4c5089f04ad1c",
    "iso_checksum_type": "sha512",
    "iso_daterev": "20170210-r313561",
    "iso_version": "12.0"
  },
  "builders": [
    {
      "type": "vmware-iso",
      "boot_command": [
        "I<wait>",
        "<enter><wait>",
        "freebsd-vagrant",
        "<enter><wait>",
        "d<spacebar>",
        "<enter><wait>",
        "<down><down><down>",
        "<enter><wait>",
        "<enter><wait>",
        "<enter><wait>",
        "<spacebar><wait>",
        "<enter><wait>",
        "Y<wait10><wait10><wait10><wait10><wait10><wait10><wait10><wait10><wait10>",
        "vagrant<enter><wait>",
        "vagrant<enter><wait>",
        "<enter><wait>",
        "Y<wait>",
        "Y<wait10><wait10>",
        "Y<wait>",
        "Y<wait10><wait10>",
        "<enter><wait>",
        "a<enter><wait>",
        "Y<wait>",
        "n<spacebar><wait>",
        "p<spacebar><wait>",
        "<down><down><down><spacebar>",
        "<enter><wait>",
        "<enter><wait>",
        "Y<wait>",
        "vagrant<enter><wait>",
        "Vagrant User<enter><wait>",
        "<enter><wait>",
        "<enter><wait>",
        "wheel",
        "<enter><wait>",
        "tcsh",
        "<enter><wait>",
        "0700",
        "<enter><wait>",
        "yes<enter>",
        "<enter><wait>",
        "<enter><wait>",
        "vagrant<enter><wait>",
        "vagrant<enter><wait>",
        "<enter>",
        "yes<enter>",
        "<enter><wait>",
        "no<enter>",
        "<enter><wait>",
        "Y",
        "sed -i -e 's/#PermitRootLogin no/PermitRootLogin yes/' /etc/ssh/sshd_config<enter><wait>",
        "echo 'autoboot_delay=\"-1\"' >> /boot/loader.conf<enter><wait>",
        "chsh -s sh root<enter><wait>",
        "exit<enter><wait>",
        "R<wait10><wait10><wait10>"
      ],
      "boot_wait": "45s",
      "disk_size": 20480,
      "guest_os_type": "freebsd-64",
      "headless": "true",
      "iso_checksum": "{{user `iso_checksum`}}",
      "iso_checksum_type": "{{user `iso_checksum_type`}}",
      "iso_url": "http://ftp.freebsd.org/pub/FreeBSD/snapshots/ISO-IMAGES/{{user `iso_version`}}/FreeBSD-{{user `iso_version`}}-CURRENT-amd64-{{user `iso_daterev`}}-disc1.iso",
      "shutdown_command": "poweroff; poweroff",
      "ssh_password": "vagrant",
      "ssh_username": "root",
      "ssh_wait_timeout": "30s"
    },
    {
      "type": "virtualbox-iso",
      "boot_command": [
        "I<wait>",
        "<enter><wait>",
        "freebsd-vagrant",
        "<enter><wait>",
        "d<spacebar>",
        "<enter><wait>",
        "<down><down><down>",
        "<enter><wait>",
        "<enter><wait>",
        "<enter><wait>",
        "<spacebar><wait>",
        "<enter><wait>",
        "Y<wait10><wait10><wait10><wait10><wait10><wait10><wait10><wait10><wait10>",
        "vagrant<enter><wait>",
        "vagrant<enter><wait>",
        "<enter><wait>",
        "Y<wait>",
        "Y<wait10><wait10>",
        "Y<wait>",
        "Y<wait10><wait10>",
        "<enter><wait>",
        "a<enter><wait>",
        "Y<wait>",
        "n<spacebar><wait>",
        "p<spacebar><wait>",
        "<down><down><down><spacebar>",
        "<enter><wait>",
        "<enter><wait>",
        "Y<wait>",
        "vagrant<enter><wait>",
        "Vagrant User<enter><wait>",
        "<enter><wait>",
        "<enter><wait>",
        "wheel",
        "<enter><wait>",
        "tcsh",
        "<enter><wait>",
        "0700",
        "<enter><wait>",
        "yes<enter>",
        "<enter><wait>",
        "<enter><wait>",
        "vagrant<enter><wait>",
        "vagrant<enter><wait>",
        "<enter>",
        "yes<enter>",
        "<enter><wait>",
        "no<enter>",
        "<enter><wait>",
        "Y",
        "sed -i -e 's/#PermitRootLogin no/PermitRootLogin yes/' /etc/ssh/sshd_config<enter><wait>",
        "echo 'autoboot_delay=\"-1\"' >> /boot/loader.conf<enter><wait>",
        "chsh -s sh root<enter><wait>",
        "exit<enter><wait>",
        "R<wait10><wait10><wait10>"
      ],
      "boot_wait": "45s",
      "disk_size": 20480,
      "guest_os_type": "FreeBSD_64",
      "headless": "true",
      "iso_checksum": "{{user `iso_checksum`}}",
      "iso_checksum_type": "{{user `iso_checksum_type`}}",
      "iso_url": "http://ftp.freebsd.org/pub/FreeBSD/snapshots/ISO-IMAGES/{{user `iso_version`}}/FreeBSD-{{user `iso_version`}}-CURRENT-amd64-{{user `iso_daterev`}}-disc1.iso",
      "shutdown_command": "poweroff; poweroff",
      "ssh_password": "vagrant",
      "ssh_username": "root",
      "ssh_wait_timeout": "30s"
    }
  ],
  "provisioners": [
    {
      "scripts": [
        "scripts/zroot-setup.sh",
        "scripts/postinstall.sh"
      ],
      "type": "shell"
    }
  ],
  "post-processors": [
    {
      "output": "FreeBSD-STABLE-zfs-{{user `iso_daterev`}}-{{.Provider}}.box",
      "type": "vagrant",
      "override": {
        "vmware": {
          "vagrantfile_template": "./Vagrantfile.vmware"
        },
        "virtualbox": {
          "vagrantfile_template": "./Vagrantfile.virtualbox"
        }
      }
    }
  ]
}
